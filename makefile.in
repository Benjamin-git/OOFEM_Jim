
#
# top oofem makefile
#
SHELL      = /bin/sh
BACKUPFILES= oofemlib/src/*.h oofemlib/src/*.h.in oofemlib/src/*.C  oofemlib/src/makefile.in sm/src/*.h sm/src/*.C  sm/src/makefile.in tm/src/*.h tm/src/*.C tm/src/makefile.in fm/src/*.h fm/src/*.C fm/src/makefile.in main/src/*.h main/src/*.C  main/src/makefile.in ./makefile.in ./configure.in ./configure ./config.sub ./config.guess ./install.sh ./README ./ChangeLog ./gpl.txt ./do_release ./VERSION ./*.pl tools/*.h tools/*.C tools/*.pl tools/makefile.in tools/adapt_job doc/refman/doxygen.cfg doc/refman/*.html doc/refman/*.shtml doc/refman/intro doc/refman/mainpage doc/refman/makefile iml/*.h oofemlib/doc/refman/doxygen.cfg oofemlib/doc/refman/*.html oofemlib/doc/refman/intro oofemlib/doc/refman/mainpage oofemlib/doc/refman/makefile dss/src/*.cpp dss/src/*.h dss/src/makefile.in
BACKUPDOCFILES=.+tex$$|.+el$$|.+sty$$|.+fig$$.+xmgr$$|.+eps$$|.+ps$$|.+shtml$$|makefile$$|do_release$$
BACKUPDOCDIR= doc/elementlibmanual  doc/paper-actap doc/extractorInput doc/matlibmanual doc/oofemInput doc/poofemInput doc/programmer
BACKUPTESTFILES=README$$|do_test$$|do_test.in$$|.+in$$|.+in\..$$|.+ctrl$$|.+t3d.in$$|.+t3d.out$$
BACKUPTESTDIR= tests


all:
	cd targets/${OOFEM_TARGET}; ${MAKE} OOFEM_TARGET=${OOFEM_TARGET}
	@echo
	@echo ${OOFEM_TARGET} target done
	@echo

clean:
	cd targets/${OOFEM_TARGET}; ${MAKE} OOFEM_TARGET=${OOFEM_TARGET} clean

backup:
	rm -f oofem.tar.gz
	ls $(BACKUPFILES) > files_to_backup
	find $(BACKUPDOCDIR) | grep -E -e '$(BACKUPDOCFILES)' >> files_to_backup
	find $(BACKUPTESTDIR) | grep -E -e '$(BACKUPTESTFILES)' >> files_to_backup
	echo "doc/makefile" >> files_to_backup
	tar cvf oofem.tar --files-from files_to_backup
	gzip oofem.tar
	